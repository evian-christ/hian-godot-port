<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hian Godot Project Documentation</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 20px; background-color: #f4f4f4; color: #333; }
        h1, h2, h3 { color: #0056b3; }
        section { background-color: #fff; padding: 20px; margin-bottom: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .script-name { font-size: 1.2em; font-weight: bold; color: #007bff; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #e9ecef; }
        .code-block { background-color: #e9ecef; padding: 10px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>Hian Godot Project Documentation</h1>
    <p>이 문서는 Godot 프로젝트의 주요 스크립트와 그 목적, 속성, 메서드에 대해 설명합니다. 프로젝트를 처음 접하는 개발자도 쉽게 이해할 수 있도록 작성되었습니다.</p>

    <section>
        <h2>1. SymbolData.gd</h2>
        <p class="script-name">파일 경로: <code>res://SymbolData.gd</code></p>
        <h3>목적</h3>
        <p>단일 심볼(예: 강, 산)의 데이터 구조를 정의합니다. Godot 에디터에서 <code>.tres</code> 파일로 생성할 수 있는 커스텀 리소스입니다.</p>
        <h3>속성 (Properties)</h3>
        <table>
            <thead>
                <tr>
                    <th>이름</th>
                    <th>타입</th>
                    <th>설명</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>id</code></td>
                    <td><code>int</code></td>
                    <td>심볼의 고유 번호 (사용자 식별용).</td>
                </tr>
                <tr>
                    <td><code>name</code></td>
                    <td><code>String</code></td>
                    <td>심볼의 이름 (내부 식별 및 UI 표시용).</td>
                </tr>
                <tr>
                    <td><code>level</code></td>
                    <td><code>int</code></td>
                    <td>심볼의 레벨 (0-10).</td>
                </tr>
                <tr>
                    <td><code>types</code></td>
                    <td><code>int</code></td>
                    <td>심볼의 타입 (Terrain, Food 등, 비트 플래그로 여러 개 선택 가능).</td>
                </tr>
                <tr>
                    <td><code>texture</code></td>
                    <td><code>Texture2D</code></td>
                    <td>심볼을 나타내는 이미지.</td>
                </tr>
                <tr>
                    <td><code>description</code></td>
                    <td><code>String</code></td>
                    <td>심볼에 대한 설명.</td>
                </tr>
            </tbody>
        </table>
    </section>

    <section>
        <h2>2. GameManager.gd</h2>
        <p class="script-name">파일 경로: <code>res://GameManager.gd</code></p>
        <h3>목적</h3>
        <p>전체 게임 상태, 전역 변수 및 핵심 게임 로직을 관리합니다. 항상 전역적으로 사용 가능한 싱글톤(오토로드) 스크립트입니다.</p>
        <h3>속성 (Properties)</h3>
        <table>
            <thead>
                <tr>
                    <th>이름</th>
                    <th>타입</th>
                    <th>설명</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>turn</code></td>
                    <td><code>int</code></td>
                    <td>현재 턴 수.</td>
                </tr>
                <tr>
                    <td><code>total_food</code></td>
                    <td><code>int</code></td>
                    <td>플레이어가 현재 보유한 총 식량.</td>
                </tr>
                <tr>
                    <td><code>initial_symbols</code></td>
                    <td><code>Array&lt;SymbolData&gt;</code></td>
                    <td>게임 시작 시 플레이어에게 주어지는 초기 심볼 목록.</td>
                </tr>
                <tr>
                    <td><code>player_owned_symbols</code></td>
                    <td><code>Array&lt;SymbolData&gt;</code></td>
                    <td>플레이어가 현재 소유하고 있는 모든 심볼 목록.</td>
                </tr>
            </tbody>
        </table>
        <h3>메서드 (Methods)</h3>
        <table>
            <thead>
                <tr>
                    <th>이름</th>
                    <th>설명</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>_ready()</code></td>
                    <td>게임 매니저가 준비될 때 호출됩니다. <code>initial_symbols</code>를 <code>player_owned_symbols</code>에 추가합니다.</td>
                </tr>
                <tr>
                    <td><code>add_symbol_to_player_pool(symbol_data: SymbolData)</code></td>
                    <td>주어진 심볼을 플레이어 소유 심볼 목록에 추가합니다.</td>
                </tr>
                <tr>
                    <td><code>get_all_symbols() -> Array&lt;SymbolData&gt;</code></td>
                    <td><code>res://resources/symbols/</code> 경로에서 모든 <code>.tres</code> 심볼 리소스를 불러와 배열로 반환합니다.</td>
                </tr>
                <tr>
                    <td><code>generate_selection_symbols() -> Array&lt;SymbolData&gt;</code></td>
                    <td><code>get_all_symbols()</code>을 통해 모든 심볼을 가져온 후, 그 중 3개를 무작위로 선택하여 반환합니다. (스핀 시 선택지 제공용)</td>
                </tr>
            </tbody>
        </table>
    </section>

    <section>
        <h2>3. Game.gd</h2>
        <p class="script-name">파일 경로: <code>res://Game.gd</code></p>
        <h3>목적</h3>
        <p>메인 게임 씬의 컨트롤러입니다. 게임 보드를 생성하고, 심볼을 배치하며, UI와의 상호작용을 처리합니다.</p>
        <h3>속성 (Properties)</h3>
        <table>
            <thead>
                <tr>
                    <th>이름</th>
                    <th>타입</th>
                    <th>설명</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>SLOT_SCENE</code></td>
                    <td><code>PackedScene</code></td>
                    <td>슬롯 씬 (<code>Slot.tscn</code>)의 프리로드된 참조.</td>
                </tr>
                <tr>
                    <td><code>BOARD_WIDTH</code></td>
                    <td><code>int</code></td>
                    <td>게임 보드의 가로 칸 수 (5).</td>
                </tr>
                <tr>
                    <td><code>BOARD_HEIGHT</code></td>
                    <td><code>int</code></td>
                    <td>게임 보드의 세로 칸 수 (4).</td>
                </tr>
                <tr>
                    <td><code>game_board</code></td>
                    <td><code>GridContainer</code></td>
                    <td>게임 보드 역할을 하는 GridContainer 노드.</td>
                </tr>
                <tr>
                    <td><code>ui</code></td>
                    <td><code>CanvasLayer</code></td>
                    <td>UI 노드.</td>
                </tr>
            </tbody>
        </table>
        <h3>메서드 (Methods)</h3>
        <table>
            <thead>
                <tr>
                    <th>이름</th>
                    <th>설명</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>_ready()</code></td>
                    <td>게임 씬이 준비될 때 호출됩니다. 보드를 생성하고 초기 심볼을 배치하며, UI 신호에 연결합니다.</td>
                </tr>
                <tr>
                    <td><code>generate_board()</code></td>
                    <td><code>BOARD_WIDTH</code>와 <code>BOARD_HEIGHT</code>에 따라 <code>Slot</code> 인스턴스를 동적으로 생성하여 <code>game_board</code>에 추가합니다.</td>
                </tr>
                <tr>
                    <td><code>clear_board()</code></td>
                    <td>보드에 있는 모든 슬롯의 심볼을 제거하여 비어있는 상태로 만듭니다.</td>
                </tr>
                <tr>
                    <td><code>place_symbols(symbols_to_place: Array&lt;SymbolData&gt;)</code></td>
                    <td>주어진 심볼 배열을 보드의 사용 가능한 슬롯에 무작위로 배치합니다.</td>
                </tr>
                <tr>
                    <td><code>_on_ui_spin_requested()</code></td>
                    <td>UI에서 스핀 버튼이 눌렸을 때 호출되는 콜백 함수입니다. 턴을 증가시키고, 보드를 정리한 후, 플레이어가 소유한 심볼을 다시 배치합니다.</td>
                </tr>
            </tbody>
        </table>
    </section>

    <section>
        <h2>4. Slot.gd</h2>
        <p class="script-name">파일 경로: <code>res://Slot.gd</code></p>
        <h3>목적</h3>
        <p>게임 보드의 개별 슬롯을 제어합니다. 심볼을 표시하고, 슬롯의 상태를 관리합니다.</p>
        <h3>속성 (Properties)</h3>
        <table>
            <thead>
                <tr>
                    <th>이름</th>
                    <th>타입</th>
                    <th>설명</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>symbol_texture</code></td>
                    <td><code>TextureRect</code></td>
                    <td>심볼 이미지를 표시하는 TextureRect 노드.</td>
                </tr>
                <tr>
                    <td><code>label</code></td>
                    <td><code>Label</code></td>
                    <td>심볼 이름 또는 "Empty" 텍스트를 표시하는 Label 노드.</td>
                </tr>
                <tr>
                    <td><code>current_symbol</code></td>
                    <td><code>SymbolData</code></td>
                    <td>현재 슬롯에 배치된 심볼 데이터.</td>
                </tr>
                <tr>
                    <td><code>is_empty</code></td>
                    <td><code>bool</code></td>
                    <td>슬롯이 비어있는지 여부.</td>
                </tr>
            </tbody>
        </table>
        <h3>메서드 (Methods)</h3>
        <table>
            <thead>
                <tr>
                    <th>이름</th>
                    <th>설명</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>_ready()</code></td>
                    <td>슬롯이 준비될 때 호출됩니다. (현재는 특별한 로직 없음)</td>
                </tr>
                <tr>
                    <td><code>set_symbol(symbol_data: SymbolData)</code></td>
                    <td>슬롯에 심볼 데이터를 할당합니다. <code>current_symbol</code>을 업데이트하고, <code>is_empty</code> 상태를 설정하며, 심볼의 텍스처와 이름을 UI에 표시합니다. 심볼이 <code>null</code>이면 슬롯을 비어있는 상태로 만듭니다.</td>
                </tr>
            </tbody>
        </table>
    </section>

    <section>
        <h2>5. UI.gd</h2>
        <p class="script-name">파일 경로: <code>res://UI.gd</code></p>
        <h3>목적</h3>
        <p>게임의 사용자 인터페이스를 관리합니다. 턴 수, 식량 표시, 스핀 버튼, 심볼 선택 버튼 등의 기능을 제공합니다.</p>
        <h3>시그널 (Signals)</h3>
        <table>
            <thead>
                <tr>
                    <th>이름</th>
                    <th>설명</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>spin_requested</code></td>
                    <td>스핀 버튼이 눌렸을 때 발생합니다.</td>
                </tr>
                <tr>
                    <td><code>symbol_selected(symbol_data)</code></td>
                    <td>심볼 선택 버튼 중 하나가 눌렸을 때, 선택된 심볼 데이터를 함께 발생합니다.</td>
                </tr>
            </tbody>
        </table>
        <h3>속성 (Properties)</h3>
        <table>
            <thead>
                <tr>
                    <th>이름</th>
                    <th>타입</th>
                    <th>설명</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>turn_label</code></td>
                    <td><code>Label</code></td>
                    <td>턴 수를 표시하는 라벨.</td>
                </tr>
                <tr>
                    <td><code>food_label</code></td>
                    <td><code>Label</code></td>
                    <td>식량 수를 표시하는 라벨.</td>
                </tr>
                <tr>
                    <td><code>select_button_1, 2, 3</code></td>
                    <td><code>Button</code></td>
                    <td>심볼 선택 버튼들.</td>
                </tr>
                <tr>
                    <td><code>spin_button</code></td>
                    <td><code>Button</code></td>
                    <td>스핀 버튼.</td>
                </tr>
                <tr>
                    <td><code>texture_rect_1, 2, 3</code></td>
                    <td><code>TextureRect</code></td>
                    <td>심볼 선택 버튼 위에 심볼 텍스처를 표시하는 TextureRect들.</td>
                </tr>
                <tr>
                    <td><code>current_selection_symbols</code></td>
                    <td><code>Array&lt;SymbolData&gt;</code></td>
                    <td>스핀 후 사용자에게 보여지는 3개의 심볼 선택지.</td>
                </tr>
            </tbody>
        </table>
        <h3>메서드 (Methods)</h3>
        <table>
            <thead>
                <tr>
                    <th>이름</th>
                    <th>설명</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>_ready()</code></td>
                    <td>UI가 준비될 때 호출됩니다. 심볼 선택 버튼들을 초기에는 비활성화합니다.</td>
                </tr>
                <tr>
                    <td><code>_process(delta)</code></td>
                    <td>매 프레임마다 호출됩니다. <code>GameManager</code>에서 턴 수와 식량 수를 가져와 UI에 업데이트합니다.</td>
                </tr>
                <tr>
                    <td><code>_on_spin_button_pressed()</code></td>
                    <td>스핀 버튼이 눌렸을 때 호출됩니다. <code>spin_requested</code> 신호를 발생시키고, 스핀 버튼을 비활성화합니다. <code>GameManager</code>에서 새로운 심볼 선택지를 가져와 UI를 업데이트합니다.</td>
                </tr>
                <tr>
                    <td><code>_on_select_button_1_pressed(), _on_select_button_2_pressed(), _on_select_button_3_pressed()</code></td>
                    <td>각 심볼 선택 버튼이 눌렸을 때 호출됩니다. 선택된 심볼을 <code>symbol_selected</code> 신호와 함께 발생시키고, <code>GameManager</code>에 플레이어 소유 심볼로 추가합니다. 선택 버튼들을 다시 비활성화하고 스핀 버튼을 활성화합니다.</td>
                </tr>
                <tr>
                    <td><code>set_select_buttons_disabled(disabled: bool)</code></td>
                    <td>심볼 선택 버튼들의 활성화/비활성화 상태를 설정합니다.</td>
                </tr>
                <tr>
                    <td><code>_update_select_buttons()</code></td>
                    <td><code>current_selection_symbols</code>에 따라 심볼 선택 버튼들의 텍스처와 라벨을 업데이트합니다.</td>
                </tr>
            </tbody>
        </table>
    </section>
</body>
</html>
